# ROADMAP

## Обзор проекта

Данный проект представляет собой веб-приложение с использованием PHP, jQuery, Bootstrap и MySQL. Целью является упорядочивание существующей кодовой базы, внедрение современных практик разработки (Docker, Git, CI/CD) и улучшение текущего функционала.

## Существующие модули

На основе текущей структуры проекта можно выделить следующие модули:

*   **Авторизация/Регистрация:** ✅ Реализовано в виде AuthController и User Model
*   **Навигация:** ✅ Реализована в виде верхнего меню и дашборда
*   **Работа с базой данных:** ✅ Реализована через класс Database с использованием PDO
*   **Модуль Balance:** Директория `balance/` (требует миграции в MVC)
*   **Модуль Maslosklad:** Директория `maslosklad/` (требует миграции в MVC)

## План работ

### 1. ✅ Реорганизация проекта в MVC структуру

#### 1.1 ✅ Создание базовой структуры
```
project/
├── app/
│   ├── Controllers/     # Контроллеры
│   ├── Models/         # Модели
│   ├── Views/          # Представления
│   ├── Core/           # Ядро приложения
│   │   ├── Database.php   # Класс для работы с БД
│   │   ├── Controller.php # Базовый контроллер
│   │   ├── Model.php      # Базовый класс модели
│   │   ├── View.php       # Класс для работы с представлениями
│   │   └── Router.php     # Маршрутизация
│   └── Config/         # Конфигурационные файлы
├── public/            # Публичная директория
│   ├── index.php      # Точка входа
│   ├── assets/        # Статические файлы
│   │   ├── css/
│   │   ├── js/
│   │   └── img/
│   └── .htaccess
├── vendor/           # Зависимости (composer)
└── composer.json     # Управление зависимостями
```

#### 1.2 ✅ Последовательность миграции
1. ✅ Создание базовых классов (Database, Controller, Model, View, Router)
2. ✅ Настройка автозагрузки классов через composer
3. ✅ Создание базового шаблона (layout)
4. ✅ Миграция базовых разделов:
   - ✅ Auth (авторизация/регистрация)
   - ✅ Profile (профиль пользователя)
   - ✅ Dashboard (панель управления)

### 2. Текущие приоритетные модули

#### 2.1 ✅ Модуль Пользователи (Users)
- [x] Создание модели User с расширенными полями
- [x] Создание UsersController
- [x] Реализация списка пользователей с фильтрацией и сортировкой
- [x] Создание представлений для управления пользователями:
  - [x] Список пользователей (index)
  - [x] Создание пользователя (create)
  - [x] Редактирование пользователя (edit)
  - [x] Просмотр профиля пользователя (show)
  - [x] Удаление пользователя (delete)
- [x] Реализация ролей пользователей и прав доступа

#### 2.2 Модуль Склад (Maslosklad)
- [ ] Реорганизация складского учета с разделением на типы складов:
  - [ ] Материальный склад
  - [ ] Инструментальный склад
  - [ ] Склад ГСМ (горюче-смазочные материалы)
  - [ ] Склад Автозапчастей

##### 2.2.1 Структура моделей для складской системы:
- [ ] Общие модели:
  - [ ] Warehouse (склад) - базовая информация о складских помещениях
  - [ ] WarehouseType (тип склада) - материальный, инструментальный, ГСМ, автозапчасти
  - [ ] Supplier (поставщик) - информация о поставщиках товаров
  - [ ] Customer (покупатель/получатель) - информация о получателях товаров
  - [ ] Category (категория товаров) - для каждого типа склада свои категории

- [ ] Товарные модели:
  - [ ] Item (базовая модель товара)
  - [ ] MaterialItem (товары материального склада)
  - [ ] ToolItem (инструменты)
  - [ ] OilItem (ГСМ - с поддержкой учета по объему)
  - [ ] AutoPartItem (автозапчасти)

- [ ] Операционные модели:
  - [ ] Operation (базовый класс операции - приход, расход, списание, перемещение)
  - [ ] Reception (приемка товара)
  - [ ] Issue (выдача товара)
  - [ ] Writeoff (списание)
  - [ ] Transfer (перемещение между складами)
  - [ ] Bottling (розлив для ГСМ)
  - [ ] Inventory (инвентаризация)

##### 2.2.2 Основные контроллеры и представления:
- [ ] Контроллеры:
  - [ ] MasloskladController (базовый контроллер всей системы)
  - [ ] WarehouseController (управление складами)
  - [ ] MaterialWarehouseController (материальный склад)
  - [ ] ToolWarehouseController (инструментальный склад)
  - [ ] OilWarehouseController (ГСМ)
  - [ ] AutoPartsController (автозапчасти)
  - [ ] SupplierController (поставщики)
  - [ ] CustomerController (получатели)
  - [ ] OperationController (операции)
  - [ ] ReportController (отчеты и статистика)

- [ ] Представления для каждого типа склада:
  - [ ] Общие представления:
    - [ ] Список/управление складами
    - [ ] Управление поставщиками
    - [ ] Управление получателями
  
  - [ ] Функциональные представления (для каждого типа склада):
    - [ ] Дашборд с основными показателями
    - [ ] Приемка товара
    - [ ] Выдача товара
    - [ ] Остатки (инвентаризация)
    - [ ] Списания
    - [ ] Перемещения
    - [ ] Отчеты

##### 2.2.3 База данных для складской системы:
- [ ] Создание новых таблиц:
  - [ ] warehouses (склады)
  - [ ] warehouse_types (типы складов)
  - [ ] categories (категории товаров с привязкой к типу склада)
  - [ ] items (товары с типом и привязкой к категории)
  - [ ] suppliers (поставщики)
  - [ ] customers (получатели)
  - [ ] operations (операции по товарам)
  - [ ] operation_types (типы операций)
  - [ ] inventory (остатки товаров)
  - [ ] item_properties (дополнительные свойства товаров зависящие от типа)

##### 2.2.4 План реализации:
- [ ] Этап 1: Разработка моделей и контроллеров для общей части (склады, категории)
- [ ] Этап 2: Реализация базовых операций (приемка, выдача, списание) на примере материального склада
- [ ] Этап 3: Перенос данных из текущих таблиц в новую структуру
- [ ] Этап 4: Реализация специфичных функций для каждого типа склада
- [ ] Этап 5: Разработка системы отчетов и дашбордов

### 3. Улучшение безопасности
- [x] Внедрение PDO вместо mysqli
- [x] Подготовленные запросы
- [x] Хеширование паролей
- [ ] CSRF защита
- [ ] XSS защита
- [ ] Валидация данных

### 4. Оптимизация фронтенда
- [x] Базовая организация JS кода
- [ ] Минификация CSS/JS
- [ ] Оптимизация загрузки ресурсов
- [ ] Улучшение UX/UI

### 5. Тестирование
- [ ] Модульные тесты (PHPUnit)
- [ ] Интеграционные тесты
- [ ] Автоматизированное тестирование

### 6. Документация
- [ ] API документация
- [ ] Документация по развертыванию
- [ ] Руководство пользователя

## Приоритеты
1. ✅ MVC структура и роутинг (завершено)
2. ✅ Модуль "Пользователи" (завершено)
3. ⬅ Модуль "Склад" (текущий этап)
4. Безопасность
5. Оптимизация
6. Тестирование
7. Документация 